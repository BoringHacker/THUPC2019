{{ self.title() }}

{{ s('background') }}

**这是一道游戏相关的题目，在下发文件中包含了一个玩具模拟了游戏规则，你可以结合这个玩具理解题目。**

鸭棋是一种风靡鸭子界的棋类游戏。事实上，它与中国象棋有一些相似之处，但规则不尽相同。在这里，我们将为你介绍鸭棋的规则。

鸭棋在一个 $8\times 9$（$8$ 行 $9$ 列）的网格棋盘上进行，网格上的每个格点都可以有棋子停留。对弈双方一方执红棋、另一方执蓝棋，双方轮流执行操作，轮到一位玩家操作时，他必须选择一枚自己的棋子，并按照规则进行一步移动。

棋子分为 $7$ 类，下面介绍了它们的名字以及它们的移动规则。介绍移动规则时，我们默认棋子所处位置为 $\left( x,y\right)$（表示第 $x$ 行的第 $y$ 列，下同），并列出它可以到达的位置：

* **王**：可达的位置共 $4​$ 个，包括 $\left(x\pm 1,y\right)​$ 及 $\left(x,y\pm 1\right)​$。
* **士**：可达的位置共 $4​$ 个，包括 $\left(x\pm 1,y\pm 1\right)​$。
* **象**：可达的位置至多 $4$ 个，对于 $s_x,s_y=\pm 1$：
  * 如果位置 $\left(x+s_x\times 1 ,y+ s_y\times 1\right)​$ 上**无任意一方**的棋子停留，则 $\left( x+s_x \times 2,y+s_y \times 2\right)​$ 为一个可达的位置。
* **马**：可达的位置至多 $8​$ 个，对于 $s_x,s_y=\pm 1​$：
  - 如果位置 $\left(x+s_x\times 1 ,y\right)$ 上**无任意一方**的棋子停留，则 $\left( x+s_x \times 2,y+s_y \times 1\right)$ 为一个可达的位置。
  - 如果位置 $\left(x ,y+ s_y \times 1 \right)​$ 上**无任意一方**的棋子停留，则 $\left( x+s_x \times 1,y+s_y \times 2\right)​$ 为一个可达的位置。
* **车**：可达的位置至多为对于同行**或**同列的所有位置，对于正整数 $k​$：
  * $\left(x+k,y\right)$ 为一个可达位置的条件是：它在棋盘上，且中间的 $k-1$ 个位置 ​$\left(x+1,y\right),\dots,\left(x+k-1,y\right)$ 上均**无任意一方**的棋子停留。
  * $\left(x-k,y\right)$ 为一个可达位置的条件是：它在棋盘上，且中间的 $k-1$ 个位置 ​$\left(x-1,y\right),\dots,\left(x-k+1,y\right)$ 上均**无任意一方**的棋子停留。
  * $\left(x,y+k\right)$ 为一个可达位置的条件是：它在棋盘上，且中间的 $k-1$ 个位置 ​$\left(x,y+1\right),\dots,\left(x,y+k-1\right)$ 上均**无任意一方**的棋子停留。
  * $\left(x,y-k\right)$ 为一个可达位置的条件是：它在棋盘上，且中间的 $k-1$ 个位置 ​$\left(x,y-1\right),\dots,\left(x,y-k+1\right)$ 上均**无任意一方**的棋子停留。
* **鸭**：可达的位置至多 $8$ 个，对于 $s_x,s_y=\pm 1$：
  - 如果位置 $\left(x+s_x\times 2 ,y+s_y \times 1\right),\left(x+s_x\times 1 ,y\right)​$ 上均**无任意一方**的棋子停留，则 $\left( x+s_x \times 3,y+s_y \times 2\right)​$ 为一个可达的位置。
  - 如果位置 $\left(x+s_x \times 1 ,y+ s_y \times 2 \right),\left(x ,y+ s_y \times 1 \right)$ 上均**无任意一方**的棋子停留，则 $\left( x+s_x \times 2,y+s_y \times 3\right)$ 为一个可达的位置。
* **兵**：可达的位置共 $8$ 个，包括 $\left(x\pm 1,y\right)$ 及 $\left(x,y\pm 1\right)$ 及 $\left(x\pm 1,y\pm 1\right)$。

除上面描述的规则之外，棋子移动还有如下额外规则：

* 不能将棋子移动到棋盘外的某个位置。
* 玩家不能将棋子移动到**已经停留了己方棋子**的位置。
* 如果玩家将棋子移动到了一个**已经停留了对方棋子**的位置，那么原本停留在该位置上的这个**对方棋子**将被移出游戏。

玩家在这个游戏中的目标是将对方的**王**移出游戏。一旦一方的**王**被移出游戏，则另一方立即宣告胜利。

对于一个棋盘的状态，如果存在一方有一步合法的操作能够将另一方的**王**移除游戏，则我们说当前局面是一个**将军**的局面。需要注意的是，即使当前轮到受到威胁的一方移动，将军局面仍可成立，这也意味着将军局面并不一定代表走投无路，而是存在可能被相应并解除的。

鸭棋发明者鸭子德规定一局鸭棋由红方执先手，且设计了初始棋盘布局如下：

【咕咕咕，这里有一张图，它将会在玩具被做好之后出现】

{{ s('description') }}

今年的 IDCC（International Duck Chess Competition，国际鸭棋大赛）正在如火如荼地进行着。你观摩了一场精彩绝伦的比赛，但你对对弈过程的记忆已经模糊不清了，只有系统留下的他们的**操作序列**，序列中的每个**操作**为当前操作者试图移动某个位置的棋子至另一个位置。你希望用这个序列，来复现出整局棋局的对弈过程。即，对于每步操作，你需要求出：

* 这步操作后，是否存在棋子被移除游戏，如有则还需求出被移出游戏的棋子。
* 这步操作后，是否形成将军。
* 这步操作后，游戏是否结束。

当然，这些操作可能有如下不合法情况：

* 此步移动的初始位置无己方棋子停留。
* 此步移动的初始位置有己方棋子停留，但移动不符合规则。
* 游戏已经结束。

序列中的不合法操作是需要被忽略的。比如，如果轮到红方移动，此时序列中的当前操作恰好是不合法的，则这个操作将被忽略，序列中的下一步操作将成为红方的操作（如仍不合法则继续忽略，直至出现合法的操作）。

{{ s('input format') }}

{{ self.input_file() }}

上面会根据具体的评测环境说明输入是文件还是标准输入等。

输入的第一行包含一个正整数 $n$，保证 $n \le {{ tl.hn(args['n']) }}$。←这是引用 *conf.yaml* 中的 `args` 的 `n` 项，然后用“好看”的格式输出。“好看”的格式如 `10^9`，`1,000,000,007`。

引用 *conf.yaml* 的方法是使用变量 `prob`，例如可以写成 `prob.args['n']`，还可以写成 `prob['args']['n']`。引用 `args` 项、`data` 项、`samples` 项和 `pre` 项可以简写成例如 `args['n']` 或 `args.n`。在下文的表格中也一样。

输入的第二行包含一个正整数 $m$，保证 $m \le {{ tl.hn(aargs.max('m')) }}$。

↑`aargs.min` 是取出 `data` 项、`samples` 项和 `pre` 项中的所有同名变量的最小值，类似的函数还有 `max` 和 `sum`。形如 `aargs['m']` 可以取出所有同名变量的迭代器。和 python 的 `dict` 类似，还可以用形如 `aargs.get('m', 0)` 指定“如果没有某项用什么对象补空”，`sum`、`min` 和 `max` 类似。如果只取出 `data` 项、`samples` 项或 `pre` 项中的同名函数，使用 `dargs`、`sargs` 或 `pargs`。

`tl` 是 `tools` 的简写，是一组工具。除 `hn` 外，还包括内建函数如 `tl.int`，`math` 中的对象或函数如 `tl.sin`，`datetime` 中的对象或函数如 `tl.time` 类，`num2chinese` 函数（可以把数字转化成中文）。

{{ s('output format') }}

{{ self.output_file() }}

输出一个字符串 `Yes`。出题人在写题面的时候注意**不要**写成 `“Yes”（不包含引号）`。

{{ s('sample', 1) }}

{{ self.sample_text() }}

上面是自动读入样例 `1.in/ans`（存储在 `down` 文件夹内） 然后渲染到题面中；如果只有一组样例，则去掉 `1` 或将其替换成空串，样例仍然保存成 `1.in/ans`。上面的 `1` 可以是字符串。

{{ self.title_sample_description() }}

这是第一组数据的样例说明。

{{ s('sample', 2) }}

{{ self.sample_file() }}

上面是只提示存在第二组样例，但不渲染到题面中。

{{ s('subtasks') }}

不要使用markdown原生的表格，使用下列方式渲染一个表格，其中表格存放在试题目录的 `tables` 子目录下。

{{ tbl('data') }}

{{ tbl('table', width = [1, 6]) }}

原理上用一个二维的 json 表格或 python 表格存储，`null` 表示和上一行合并，不支持横向合并。建议用 python 的格式写，如例子中的 `data.pyinc`，这样可以根据数据生成；跟数据无关的表格则可以像 `table.json` 那样存储。

{{ s('scoring') }}

这是评分方法，如果有必要的话。

{{ s('hint') }}

这里是一个非常温馨的提示。